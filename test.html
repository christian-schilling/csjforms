<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
<title>Test</title>

<script type="text/javascript" src="template.js"></script>
<script type="text/javascript" src="jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="jquery.formlib.js"></script>
<script type="text/javascript" charset="utf-8">


$(document).ready(function(){

widgets = $.csjforms.widgets;
fields = $.csjforms.fields;
docs = $.csjforms.docs;

var opts = new docs.Main({ name:"eventgroup", verbose:'Event group',
    doc:{
        name: new fields.Text({verbose:'Name',}),
        description: new fields.Text({widget: new widgets.Textarea(),}),
        event_set: new docs.Inline({verbose:'Event',plural:'Events',
            doc:{
                name: new fields.Text(),
                jear: new fields.Text(),
                event_date_set: new docs.Inline({verbose:'Event date',
                    doc:{
                        date: new fields.Text(),
                    }
                }),
            }
        }),
        blub_set: new docs.Inline({
            doc:{
                foo: new fields.Text(),
            }
        }),
    },
});

testdata = {name:"1", description:"2", event_set:[{name:"3", jear:"4", event_date_set:[{date:"5"}, {date:"6"}]}, {name:"7", jear:"8", event_date_set:[]}], blub_set:[{foo:"9"}, {foo:"10"}]};

$("#eventgroup").csjform(opts,function(out1){
    $("#eventgroupout").csjform(opts,function(out2){
        alert(out2.toSource() == testdata.toSource());
    },out1);
},testdata);

});
</script>
</head>
<body>
    <form method="post" action="#" id="eventgroup">
        <div>
            <input id="save" type="submit" value="submit" name="submit">
        </div>
    </form>

    <form method="post" action="#" id="eventgroupout">
        <div>
            <input id="save" type="submit" value="submit" name="submit">
        </div>
    </form>

</body>
</html>
